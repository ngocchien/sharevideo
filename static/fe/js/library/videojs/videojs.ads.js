(function(c,g,n){g.getComponent("Html5");var f=function(b){b.ads.cancelPlayTimeout||(b.ads.cancelPlayTimeout=c.setTimeout(function(){b.ads.cancelPlayTimeout=null;b.paused()||(b.ads.pausedByAds=!0,b.pause());b.one("contentplayback",function(){b.paused()&&b.ads.pausedByAds&&b.play()})},1))},k=function(b){var a=b.$(".vjs-tech"),c=b.remoteTextTracks?b.remoteTextTracks():[],h,e=[],b={ended:b.ended(),currentSrc:b.currentSrc(),src:b.src(),currentTime:b.currentTime(),type:b.currentType()};a&&(b.nativePoster=
a.poster,b.style=a.getAttribute("style"));for(h=c.length;h--;)a=c[h],e.push({track:a,mode:a.mode}),a.mode="disabled";b.suppressedTracks=e;return b},o=function(b,a){var d=b.$(".vjs-tech"),h=20,e=a.suppressedTracks,j,l=function(){for(var a=e.length;a--;)j=e[a],j.track.mode=j.mode},f=function(){var e=!1,d=function(){e=!0};b.currentTime(a.currentTime);a.ended?(b.ads.resumeEndedTimeout=c.setTimeout(function(){e||b.play();b.off("ended",d);b.ads.resumeEndedTimeout=null},250),b.on("ended",d),b.on("dispose",
function(){c.clearTimeout(b.ads.resumeEndedTimeout)})):b.play()},i=function(){b.off("contentcanplay",i);b.ads.tryToResumeTimeout_&&(b.clearTimeout(b.ads.tryToResumeTimeout_),b.ads.tryToResumeTimeout_=null);d=b.el().querySelector(".vjs-tech");if(1<d.readyState||d.seekable===n||0<d.seekable.length)return f();if(h--)c.setTimeout(i,50);else try{f()}catch(a){g.log.warn("Failed to resume the content after an advertisement",a)}};a.nativePoster&&(d.poster=a.nativePoster);"style"in a&&d.setAttribute("style",
a.style||"");if(b.src()!==a.src||b.currentSrc()!==a.currentSrc)b.one("contentloadedmetadata",l),b.src({src:a.currentSrc,type:a.type}),b.load(),b.one("contentcanplay",i),b.ads.tryToResumeTimeout_=b.setTimeout(i,2E3);else if(!b.ended()||!a.ended)l(),b.play()},m=function(b){(b=b.$(".vjs-tech"))&&b.removeAttribute("poster")},p={timeout:5E3,prerollTimeout:100,postrollTimeout:100,debug:!1};g.plugin("ads",function(b){var a=this,d=g.mergeOptions(p,b);a.on(["addurationchange","adcanplay"],function(){a.currentSrc()!==
a.ads.snapshot.currentSrc&&a.play()});a.ads={state:"content-set",startLinearAdMode:function(){"ad-playback"!==a.ads.state&&a.trigger("adstart")},endLinearAdMode:function(){"ad-playback"===a.ads.state&&a.trigger("adend")},skipLinearAdMode:function(){"ad-playback"!==a.ads.state&&a.trigger("adskip")}};b=function(b){var e={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?";f(a);m(a)},adserror:function(){this.state=
"content-playback"},adskip:function(){this.state="content-playback"}}},"ads-ready":{events:{play:function(){this.state="preroll?";f(a)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){a.addClass("vjs-ad-loading");a.ads.adTimeoutTimeout=c.setTimeout(function(){a.trigger("adtimeout")},d.prerollTimeout);a.trigger("readyforpreroll")},leave:function(){c.clearTimeout(a.ads.adTimeoutTimeout);a.removeClass("vjs-ad-loading")},
events:{play:function(){f(a)},adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){a.addClass("vjs-ad-loading");a.ads.adTimeoutTimeout=c.setTimeout(function(){a.trigger("adtimeout")},d.timeout)},leave:function(){c.clearTimeout(a.ads.adTimeoutTimeout);a.removeClass("vjs-ad-loading")},events:{play:function(){f(a)},adscanceled:function(){this.state=
"content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){this.snapshot=k(a);a.addClass("vjs-ad-playing");m(a);a.ads.cancelPlayTimeout&&(c.clearTimeout(a.ads.cancelPlayTimeout),a.ads.cancelPlayTimeout=null)},leave:function(){a.removeClass("vjs-ad-playing");o(a,this.snapshot);"adend"!==a.ads.triggerevent&&a.trigger("adend")},
events:{adend:function(){this.state="content-resuming"},adserror:function(){this.state="content-resuming"}}},"content-resuming":{enter:function(){this.snapshot.ended&&(c.clearTimeout(a.ads._fireEndedTimeout),a.ads._fireEndedTimeout=c.setTimeout(function(){a.trigger("ended")},1E3))},leave:function(){c.clearTimeout(a.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},contentresumed:function(){this.state="content-playback"},playing:function(){this.state="content-playback"},
ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){this.snapshot=k(a);a.addClass("vjs-ad-loading");a.ads.adTimeoutTimeout=c.setTimeout(function(){a.trigger("adtimeout")},d.postrollTimeout)},leave:function(){c.clearTimeout(a.ads.adTimeoutTimeout);a.removeClass("vjs-ad-loading")},events:{adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-resuming";c.setTimeout(function(){a.trigger("ended")},1)},adtimeout:function(){this.state="content-resuming";
c.setTimeout(function(){a.trigger("ended")},1)},adserror:function(){this.state="content-resuming";c.setTimeout(function(){a.trigger("ended")},1)}}},"content-playback":{enter:function(){a.ads.cancelPlayTimeout&&(c.clearTimeout(a.ads.cancelPlayTimeout),a.ads.cancelPlayTimeout=null);a.trigger({type:"contentplayback",triggerevent:a.ads.triggerevent})},events:{adsready:function(){a.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback"},contentupdate:function(){this.state=a.paused()?"content-set":
"ads-ready?"},contentended:function(){this.state="postroll?"}}}};(function(c){var f=function(){};((e[c].events||{})[b.type]||f).apply(a.ads);c!==a.ads.state&&(a.ads.triggerevent=b.type,(e[c].leave||f).apply(a.ads),(e[a.ads.state].enter||f).apply(a.ads),d.debug&&g.log("ads",a.ads.triggerevent+" triggered: "+c+" -> "+a.ads.state))})(a.ads.state)};a.on("loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ").concat("adtimeout contentupdate contentplaying contentended contentresumed adsready adserror adscanceled adstart adend adskip".split(" ")),
b);a.ads.contentSrc=a.currentSrc();(function(){var b=function(){var b;"ad-playback"!==a.ads.state&&(b=a.currentSrc(),b!==a.ads.contentSrc&&(a.trigger({type:"contentupdate",oldValue:a.ads.contentSrc,newValue:b}),a.ads.contentSrc=b))};a.on("loadstart",b);c.setTimeout(b,1)})();a.paused()||b({type:"play"})})})(window,videojs);
